# ============================================================
# APPLICATION
# ============================================================
spring.application.name=${SPRING_APPLICATION_NAME}
server.port=${PORT:8080}

# ============================================================
# R2DBC (WEBFLUX) - PROD
# ============================================================
spring.r2dbc.url=r2dbc:postgresql://${DB_USERNAME}:${DB_PASSWORD}@${DB_HOST}:${DB_PORT}/${DB_NAME}
spring.r2dbc.pool.initial-size=5
spring.r2dbc.pool.max-size=20
spring.r2dbc.pool.max-idle-time=30m

# ============================================================
# LIQUIBASE (JDBC) - PROD
# ============================================================
spring.liquibase.enabled=true
spring.liquibase.change-log=classpath:db/changelog/db-changelog-master.xml
spring.liquibase.url=jdbc:postgresql://${DB_HOST}:${DB_PORT}/${DB_NAME}
spring.liquibase.user=${DB_USERNAME}
spring.liquibase.password=${DB_PASSWORD}
spring.liquibase.driver-class-name=org.postgresql.Driver

# ============================================================
# JPA (DÉSACTIVÉ)
# ============================================================
spring.jpa.enabled=false
spring.jpa.hibernate.ddl-auto=none

# ============================================================
# LOGGING (PROD)
# ============================================================
logging.level.com.ussdgateway=INFO
logging.level.org.springframework.r2dbc=INFO
logging.level.liquibase=INFO

# ============================================================
# ENCODING
# ============================================================
server.servlet.encoding.charset=UTF-8
spring.messages.basename=messages
spring.messages.encoding=UTF-8

# ============================================================
# USSD CONFIG
# ============================================================
ussd.main-menu.code=*500#
ussd.service.code-prefix=*500*
ussd.service.code-suffix=#
ussd.session.timeout-minutes=5
ussd.session.cleanup-rate-ms=60000
ussd.session.hard-delete-after-days=7
ussd.session.hard-delete-cron=0 0 2 * * *

# ============================================================
# FILE UPLOAD
# ============================================================
spring.servlet.multipart.max-file-size=50MB
spring.servlet.multipart.max-request-size=50MB
spring.codec.max-in-memory-size=50MB

# ============================================================
# AI GENERATOR (SECRETS)
# ============================================================
ai.generator.enabled=true
ai.generator.provider=huggingface
ai.generator.huggingface.api-key=${AI_HF_API_KEY}
ai.generator.huggingface.base-url=https://api.groq.com/openai/v1
ai.generator.huggingface.model=llama3-70b-8192
ai.generator.huggingface.timeout=60000
ai.generator.huggingface.max-tokens=8192
